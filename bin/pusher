#!/bin/bash

branch="$1"
comment="$2"
exists=`git show-ref refs/heads/"$branch"`

#if branch exists append current date
if [ -n "$exists" ]
then
  echo 'branch '$branch' already exists! appending date.'
  branch=$1$(date +"%m-%d-%Y-%I-%M-%S")
  echo $branch
fi

echo $branch
echo $comment

git checkout -b $branch
git add . && git commit -m "$comment"
git checkout master && git pull origin master
git merge $branch

# ask if pusher should push
echo "Do you wish to push branch "$1"?"
select yn in "Yes" "No"; do
  case $yn in
    Yes ) git push; break;;
    No ) echo -e 'push has been \033[91m cancelled \033[39m'; exit;;
  esac
done

#ask if pusher should clean
echo "Do you wish to clean?"
select yn in "Yes" "No"; do
  case $yn in
    Yes ) clean; break;;
    No ) echo -e "clean was \033[91mNOT \033[39mperformed"; exit;;
  esac
done
