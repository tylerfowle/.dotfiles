#!/bin/bash

branch="$1"
comment="$2"
exists=`git show-ref refs/heads/"$branch"`

#if branch exists append current date
if [ -n "$exists" ]
then
	echo 'branch '$branch' already exists!'
	branch=$1$(date +"%m-%d-%Y-%I-%M-%S")
	echo $branch
fi

#run git commands
echo -e "\033[92m================= checkout new branch ============================\033[39m";
git cob $branch;
echo -e "\033[92m================= add and commit with message ====================\033[39m";
#git ac $comment;
git ac '"'$comment'"';
echo -e "\033[92m================= checkout master and pull =======================\033[39m";
git comp;
echo -e "\033[92m================= merge new branch ===============================\033[39m";
git merge $branch;
echo -e "\033[92m================= completed ======================================\033[39m";


# ask if pusher should push
echo -e "\033[92m==================================================================\033[39m";
echo "Do you wish to push branch "$1"?"
echo -e "\033[92m==================================================================\033[39m";
select yn in "Yes" "No"; do
	case $yn in
		Yes ) git push; break;;
		No ) echo -e 'push has been \033[91m cancelled \033[39m'; return 0;;
	esac
done

#ask if pusher should clean
echo "Do you wish to clean?"
select yn in "Yes" "No"; do
	case $yn in
		Yes ) clean; break;;
		No ) echo -e "clean was \033[91mNOT \033[39mperformed"; return 0;;
	esac
done
