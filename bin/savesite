#!/bin/bash

# save the active Chrome window source to file
# usage
# savesite filename.html
#
IFS='%'
appName="Google Chrome"

URL=$(/usr/bin/osascript << EOT
tell application "System Events"
  try
    tell application "Google Chrome"
      return URL of active tab of front window
    end tell
  end try
end tell
EOT)

FILENAME=${1:-"live.html"}

echo ""
echo "saving ${URL} as ${FILENAME}"
echo ""

curl $URL > $FILENAME

sed -i '' '/<!-- jQuery -->/i\
<link rel="stylesheet" href="css/stylesheet.css">' $FILENAME
