#!/bin/bash

echo " ___ _____ _   ___ _____ ___ ___  "
echo "/ __|_   _/_\ | _ \_   _| __| _ \ "
echo "\__ \ | |/ _ \|   / | | | _||   / "
echo "|___/ |_/_/ \_\_|_\ |_| |___|_|_\ "
echo ""

[ -f "$PWD"/**/*.scss ] && sass=true  || sass=false
[ -f "$PWD"/gulpfile.js ] && gulp=true  || gulp=false

# start atom
echo -e "\033[92m";echo "==> starting atom";echo -e "\033[39m"
atom .

if [ $gulp == true ]; then
  echo -e "\033[92m";echo "==> gulp found";echo -e "\033[39m"
  if [ -d "$PWD/node_modules/gulp" ]; then
    echo -e "\033[92m";echo "==> success - starting gulp in background";echo -e "\033[39m"
    ## start default gulp task as a background process
    gulp &
  else
    echo -e "\033[0;31m";echo "==> failed - gulp not installed";echo -e "\033[39m"
    echo -e "\033[92m";echo "==> running gup...";echo -e "\033[39m"
    ## run gup functions
    gup
  fi
elif [ $sass == true ]; then
  echo -e "\033[92m";echo "==> codekit found";echo -e "\033[39m"
  ## open codekit with current directory
  open -a /Applications/CodeKit.app/ .
fi
